# 第2章 指令：计算机的语言

指令系统具有相似性：所有计算机基于相似基本原理的硬件构建。  
设计目标：让构建硬件和编译器容易，同时最大化性能且最小化成本和资源的语言。

硬件设计的基本原则：

* 简单源于规整：操作数数量可变的硬件比固定数量的硬件更复杂。  
* 更少则更快：数量过多的寄存器可能会增加时钟周期（电信号传输距离）。  
* 优秀的设计需要适当的折中

RISC-V 中的算术运算只能作用于寄存器，而寄存器是有限的，更多的数据存放在内存中，所以需要数据传输指令来在寄存器和内存之间传输数据。  
内存可以看作大型的一维数组。

在一些体系结构中，字的起始位置必须是 4 的倍数，而双字的起始位置必须是 8 的倍数。这一对齐限制能使数据传输更快。在 RISC-V 和 x86 中没有对齐限制，但在 MIPS 中存在。

RISC-V 字段：有用于寄存器的 R 型、用于立即数的 I 型和用于存储双字的 S 型，其原则是保持所有指令长度相同。

![R 型指令](_v_images/20220911165541503_5871.png)

![I 型指令](_v_images/20220911165751416_29083.png)

![S 型指令](_v_images/20220911165902968_2674.png)

* `opcode`：操作码，指令的基本操作，表示指令操作和指令格式的字段  
* `rd`：目的操作数寄存器，存放操作结果  
* `funct3` 和 `func7` 操作码字段  
* `rs1`：第一个源操作数寄存器  
* `rs2`：第二个源操作数寄存器

