# Chapter 1 Operating system interfaces

操作系统负责管理和抽象底层硬件，为上层应用提供接口。  
设计一个好的接口是困难的：一方面，我们希望接口是简单且有限的，这样就能简单地正确实现；另一方面，我们希望为应用提供高级的特性。解决的思路是，设计仅依赖少数机制的接口，更好的满足普遍性要求。  
xv6 提供了类似 Unix 的基础界面接口。xv6 包括传统形式的内核，即提供运行程序基础服务的一个特殊程序。其它程序（被称为进程）分别拥有内存来容纳指令、数据和栈。通常来说，一台计算机包括若干进程和一个内核。当进程需要调用系统服务时，进程使用系统调用  system call 。系统调用进入内核，由内核执行服务，然后退出。这样就使得进程交替地在用户态 user space 和内核态 kernel space 运行。xv6 提供了 Unix 系统调用的一个子集。  
内核使用 CPU 提供的硬件保护机制来确保每个进程仅能访问自己分配到的内存

## Processes and Memory
每个 xv6 进程都包括用户空间的内存和由内核私有的状态。内核为每一个进程分配了一个独有的 PID 号用于识别。  
`fork` 系统调用可以用于创建子进程，子进程与父进程有着相同的内存内容，但实际使用的内存和寄存器是不相同的。 `exit` 系统调用停止程序运行并释放进程使用的资源。`wait`系统调用等待一个子进程结束，返回子进程的 PID 。`exec` 系统调用使用一个符合 ELF 格式的程序来替换当前内存空间中运行的程序。  
xv6 shell 使用 `fork` 和  `exec` 这两个系统调用来代表用户运行进程。